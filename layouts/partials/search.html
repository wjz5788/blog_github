<input type="text" id="searchBox" placeholder="搜索文章..."/>
<ul id="results"></ul>

<script src="https://cdn.jsdelivr.net/npm/lunr/lunr.min.js"></script>
<script>
fetch('/index.json')
  .then(response => response.json())
  .then(data => {
    window.idx = lunr(function () {
      this.ref('url')
      this.field('title')
      this.field('content')
      data.forEach(doc => this.add(doc))
    });
    window.docs = data;
  });

document.getElementById('searchBox').addEventListener('input', function() {
  const results = window.idx.search(this.value);
  const ul = document.getElementById('results');
  ul.innerHTML = '';
  results.forEach(r => {
    const doc = window.docs.find(d => d.url === r.ref);
    const li = document.createElement('li');
    li.innerHTML = `<a href="${doc.url}">${doc.title}</a>`;
    ul.appendChild(li);
  });
});
</script>
